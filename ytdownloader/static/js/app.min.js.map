{"version":3,"file":"app.min.js","mappings":"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","sources":["webpack://ytdownload/./ytdownloader/react_src/download_form.jsx","webpack://ytdownload/./ytdownloader/react_src/app.js","webpack://ytdownload/webpack/bootstrap","webpack://ytdownload/webpack/runtime/chunk loaded","webpack://ytdownload/webpack/runtime/hasOwnProperty shorthand","webpack://ytdownload/webpack/runtime/jsonp chunk loading","webpack://ytdownload/webpack/startup"],"sourcesContent":["/*\nCopyright 2022 Steven Su\n\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License along with this program. If not, see <https://www.gnu.org/licenses/>.\n*/\nimport React from 'react';\n\nclass StatusLine extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const prefix = \"Step \" + this.props.itemNumber + \": \";\n    const body = this.props.text;\n    const suffix = this.props.suffix;\n    var status_color, icon;\n    if (this.props.stateNumber === this.props.stateLoading && this.props.stateNumber !== this.props.stateDone) {\n      status_color = \"has-text-info\";\n      icon = <i className=\"fas fa-sync fa-spin\"></i>;\n    } else if (this.props.stateNumber >= this.props.stateDone) {\n      status_color = \"has-text-success\";\n      icon = <i className=\"fas fa-check\"></i>;\n    } else {\n      status_color = \"grey-lighter\";\n      icon = null;\n    }\n    return <span className={status_color}><b>{prefix}</b>{body + \" \" + suffix} {icon}</span>;\n  }\n}\n\nclass DownloadStatusBox extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    var out;\n    if (this.props.state !== -1) {\n      out = this.props.steps.map(\n        (step) => <div key={step.number}><StatusLine itemNumber={step.number}\n          text={step.text}\n          suffix={step.suffix}\n          stateNumber={this.props.state}\n          stateDone={step.stateDone}\n          stateLoading={step.stateLoading}\n        /><br /></div>\n      )\n    } else {\n      out = <span className=\"has-text-danger\"><b>Message: </b>An error has occurred. Please check URL or contact an administrator. Error details: {this.props.error_code}</span>;\n    }\n    return <div>{out}</div>;\n  }\n}\n\nclass DownloadForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { downloading: false, url: \"\", interval: null, jobid: \"\", state: 0, format: \"audio_only\", message: \"\", error_retry: 0, percent: \"0%\" };\n\n    this.handleURLChange = this.handleURLChange.bind(this);\n    this.handleFormatChange = this.handleFormatChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.makeRequest = this.makeRequest.bind(this);\n    this.checkStatus = this.checkStatus.bind(this);\n    this.restart = this.restart.bind(this);\n  }\n\n  handleURLChange(event) {\n    this.setState({ url: event.target.value })\n  }\n\n  handleFormatChange(event) {\n    this.setState({ format: event.target.value });\n    console.log(event.target.value);\n  }\n\n  handleSubmit(event) {\n    this.makeRequest();\n    event.preventDefault();\n  }\n\n  restart() {\n    this.setState({ downloading: false, url: \"\", interval: null, jobid: \"\", state: 0, percent: \"0%\", error_retry: 0, message: \"\" });\n  }\n\n  makeRequest() {\n    this.setState({ downloading: true })\n    fetch('/api/job/request', {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ \"url\": this.state.url, \"format\": this.state.format }),\n    }).then(response => response.json())\n      .then((data) => {\n        if (data.state === \"success\") {\n          setTimeout( () => {\n            this.setState({ state: 1, downloading: true, interval: setInterval(this.checkStatus, 500), jobid: data.id, percent: \"0%\", error_retry: 0 });\n          }, 1000)\n        } else {\n          this.setState({ state: -1, interval: null, message: data.message });\n        }\n      },\n      (error) => {\n        if (this.state.error_retry < 3) {\n          this.setState({ error_retry: this.state.error_retry + 1 });\n          this.makeRequest();\n        } else {\n          this.setState({ state: -1, interval: null, message: \"Error: \" + error });\n        }\n      });\n  }\n\n  checkStatus() {\n    if (this.state.jobid === null) {\n      return;\n    }\n    fetch('/api/job/status', {\n      method: \"POST\",\n      mode: \"cors\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ \"id\": this.state.jobid }),\n    }).then(response => response.json())\n      .then((data) => {\n        console.log(data);\n        if (data.state === \"downloading\" && this.state.state !== 2) {\n          this.setState({ state: 2, percent: data.percent, error_retry: 0 })\n        } else if (data.state === \"downloading\" && this.state.state === 2) {\n          this.setState({ percent: data.percent, error_retry: 0 })\n        } else if (data.state === \"processing\" && this.state.state !== 3) {\n          this.setState({ state: 3, percent: \"100%\", error_retry: 0 })\n        } else if ((data.state === \"done\" && this.state.state !== 4)) {\n          this.setState({ state: 4, interval: clearInterval(this.state.interval), percent: \"100%\", error_retry: 0 })\n        } else if (data.state === \"error\") {\n          if (this.state.error_retry > 5) {\n            this.setState({ state: -1, interval: clearInterval(this.state.interval), message: data.message, error_retry: 0 });\n          } else {\n            this.setState({ error_retry: this.state.error_retry + 1 });\n          }\n        }\n      },\n      (error) => {\n        if (this.state.error_retry > 5) {\n          this.setState({ state: -1, interval: clearInterval(this.state.interval), message: \"Error: \" + error, error_retry: 0 });\n        } else {\n          this.setState({ error_retry: this.state.error_retry + 1 });\n        }\n      });\n  }\n\n  render() {\n    var downloadBox, downloadStatus;\n    var downloadButton = null;\n    if (this.state.downloading) {\n      var steps = [\n        { \"number\": 1, \"text\": \"Queue download request\", \"suffix\": \"\", \"stateLoading\": 1, \"stateDone\": 2 },\n        { \"number\": 2, \"text\": \"Video downloading on server\", \"suffix\": \"(\" + this.state.percent + \")\", \"stateLoading\": 2, \"stateDone\": 3 },\n        { \"number\": 3, \"text\": \"Post-processing and conversion\", \"suffix\": \"\", \"stateLoading\": 3, \"stateDone\": 4 },\n        { \"number\": 4, \"text\": \"Read to download\", \"suffix\": \"\", \"stateLoading\": 4, \"stateDone\": 4 }\n      ];\n      downloadStatus = <DownloadStatusBox state={this.state.state} steps={steps} error_code={this.state.message} />;\n\n      if (this.state.state === 4) {\n        downloadButton = <div className=\"field is-grouped mt-1\">\n          <p className=\"control\"><a className=\"button is-info\" download href={\"/api/job/download/\" + this.state.jobid + \"/\" + this.state.format}>Download</a></p>\n          <p className=\"control\"><input className=\"button is-info\" value=\"Reset\" type=\"reset\" /></p>\n        </div>;\n      } else if (this.state.state === -1) {\n        downloadButton = <div className=\"field is-grouped mt-1\">\n          <p className=\"control\"><input className=\"button is-info\" value=\"Reset\" type=\"reset\" /></p>\n        </div>;\n      }\n\n      downloadBox = <div className=\"\">\n        <div className=\"container\">\n          {downloadStatus}\n        </div>\n        {downloadButton}\n      </div>;\n    }\n\n    return (\n      <form onSubmit={this.handleSubmit} onReset={this.restart}>\n        <div className=\"field has-addons has-addons-centered\">\n          <div className=\"control\">\n            <span className=\"select\">\n              <select disabled={this.state.downloading} onChange={this.handleFormatChange} value={this.state.format}>\n                <option value=\"audio_only\">Audio Only</option>\n                <option value=\"video_only\">Video Only</option>\n                <option value=\"both\">Audio + Video</option>\n              </select>\n            </span>\n          </div>\n          <div className=\"control is-expanded\">\n            <input className=\"input\" disabled={this.state.downloading} type=\"text\" placeholder=\"Source URL\" onChange={this.handleURLChange} value={this.state.url} />\n          </div>\n          <div className=\"control\">\n            <button disabled={this.state.downloading} className=\"button is-info\">\n              Download\n            </button>\n          </div>\n        </div>\n        {downloadBox}\n      </form>\n    );\n  }\n}\n\nexport default DownloadForm;","/*\nCopyright 2022 Steven Su\n\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public License along with this program. If not, see <https://www.gnu.org/licenses/>.\n*/\nimport ReactDOM from 'react-dom';\nimport DownloadForm from './download_form';\n\nReactDOM.render(\n    DownloadForm,\n    document.getElementById('download_form')\n);","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkytdownload\"] = self[\"webpackChunkytdownload\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [96], () => (__webpack_require__(342)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["StatusLine","_React$Component","props","_classCallCheck","_callSuper","_inherits","_createClass","key","value","prefix","itemNumber","body","text","suffix","status_color","icon","stateNumber","stateLoading","stateDone","_jsx","className","_jsxs","children","React","DownloadStatusBox","_React$Component2","_this","out","state","steps","map","step","number","error_code","DownloadForm","_React$Component3","_this2","downloading","url","interval","jobid","format","message","error_retry","percent","handleURLChange","bind","handleFormatChange","handleSubmit","makeRequest","checkStatus","restart","event","setState","target","console","log","preventDefault","_this3","fetch","method","mode","headers","JSON","stringify","then","response","json","data","setTimeout","setInterval","id","error","_this4","clearInterval","downloadBox","downloadStatus","downloadButton","download","href","type","onSubmit","onReset","disabled","onChange","placeholder","ReactDOM","document","getElementById","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","deferred","result","chunkIds","fn","priority","i","notFulfilled","fulfilled","j","r","obj","prop","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}